
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>ハンズオン｜Gatsbyで爆速ブログ公開</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="gatsby-hands-on"
                  title="ハンズオン｜Gatsbyで爆速ブログ公開"
                  environment="web"
                  feedback-link="https://github.com/Yu-Sei-M/yu-sei-m.github.io/issues">
    
      <google-codelab-step label="はじめに" duration="2">
        <aside class="special"><p>説明：今回のハンズオンでは、Reactアプリ開発の基本を確認しながら、作成から公開までを通しで進めていきます。途中で詰まった場合はDiscordに投稿してください。</p>
</aside>
<h2 is-upgraded>ハンズオンの流れ</h2>
<ol type="1">
<li>はじめに（ハンズオンの流れ）</li>
<li>静的サイトジェネレータ</li>
<li>公式サイトでテンプレを選ぼう</li>
<li>gatsbyコマンドを実行しよう</li>
<li>エディタで編集しよう</li>
<li>ウェブに公開しよう</li>
<li>まとめ</li>
</ol>
<p><strong>なお、本ハンズオンは</strong><a href="https://yu-sei-m.github.io/how-to-install-nodejs/#0" target="_blank"><strong>こちら</strong></a><strong>の事前準備を完了していることが前提になります。</strong></p>
<p>完了していない方は、今回は聴講スタイルでご参加ください。</p>
<p>それでは進めていきましょう。</p>


      </google-codelab-step>
    
      <google-codelab-step label="講義パートのおさらい" duration="3">
        <aside class="special"><p>説明：前半の座学では、今回一緒にブログアプリを作成する際に利用するGatsbyJSというフレームワークの実質的内容を把握しました。</p>
</aside>
<p>以下の到達目標を達成できているか確認してください。</p>
<h2 is-upgraded>到達目標</h2>
<ul>
<li>フレームワークを利用する意義を理解する</li>
<li>静的サイトジェネレータについて人に説明できる</li>
<li>モダンな開発の正体を知る</li>
<li>GatsbyJSの３つのコンセプトを押さえる</li>
</ul>
<p>今回のハンズオン終了時に「GatsbyJSがわかった！」「今後自分で試してみることができそう！」と思えたなら参加した価値があったと自信を持って言えるはずです。がんばりましょう。</p>
<aside class="warning"><p>指示：スライドで解説した内容を意識しながら一緒にGatsbyJSアプリをいじりましょう。</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="テンプレートを選ぼう" duration="5">
        <aside class="special"><p>説明：GatsbyもReactなどと同様にコマンド一発でアプリの雛形が完成しますが、Gatsby公式に共有されているテンプレートを使えば<strong>さらに効率よく</strong>アプリの雛形を作成することができます。</p>
</aside>
<aside class="warning"><p>指示：配信を見ながら一緒にテンプレを選ぶ作業を進めていただきます。まずは「GatsbyJS テンプレート」でググりましょう！</p>
</aside>
<p class="image-container"><img src="img/3310876acfea7381.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="コマンドを実行しよう" duration="5">
        <p>GatsbyJS公式のテンプレサイトを見るといろんなテンプレートが公開されていました。 今回はBlogを作りたいので、SEO対策が施され、PWA対応しているテンプレートを選びましたね。</p>
<aside class="special"><p>説明：ここでは、テンプレートからGatsbyアプリの雛形を作っていきます。と言っても通常のGatsbyアプリの作成と同じコマンドを使って実行するので、何か難しい作業が必要なわけではありません。進めていきましょう。</p>
</aside>
<p class="image-container"><img src="img/b99a51529ef53cad.png"></p>
<pre>コマンド
</pre>
<p>コマンドの実行は時間がかかる場合があります。 事前準備ですでに１つ目は実行している方が多いと思いますが、ここで一旦小休憩を挟みます。</p>


      </google-codelab-step>
    
      <google-codelab-step label="エディタで編集しよう" duration="20">
        <aside class="special"><p>説明：Gatsbyアプリの見た目をいじるためにどこをどのように編集すれば良いかを押さえましょう。ここではコードの内容については深く説明しないので、「こんな風にあたりをつけて試行錯誤すればいじり方がわかるのか」と感覚をつかんでください。</p>
</aside>
<p class="image-container"><img src="img/d95fa8cde50591d0.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="ウェブに公開しよう" duration="7">
        <aside class="special"><p>説明：ReactアプリでJavaScriptを記述し、プログラミングを組み合わせる方法を確認し、いつでも追加実装できるようにポイントを押さえましょう。</p>
</aside>
<p><code>完成後のApp.js</code></p>
<pre><code language="language-js" class="language-js">import &#39;./App.css&#39;;

const checkIn = () =&gt; {
  var pass = prompt(&#34;パスワードを入力して下さい:&#34;,&#34;&#34;);
  if (pass != null) window.location.href = &#34;https://yu-sei-m.github.io/&#34; + pass;
}

// function App() { // 通常の関数定義
const App = () =&gt; { // アロー関数定義
  const logo = &#39;/images/logo.png&#39;;
  return (
    &lt;div className=&#34;App&#34;&gt;
      &lt;header className=&#34;App-header&#34;&gt;
        &lt;img src={logo} className=&#34;App-logo&#34; alt=&#34;logo&#34; /&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;p&gt;
          &lt;b&gt;フィットネス・エンジニアの勉強会&lt;/b&gt;
        &lt;/p&gt;
        &lt;a
          className=&#34;App-link&#34;
          onClick={()=&gt;checkIn()}
        &gt;
          はじめて学ぶReact
        &lt;/a&gt;
      &lt;/header&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
<p>関数の定義方法が違うことに気づきましたか？この説明は最後に補足するので、今は<strong>「このように書いても動くんだなあ」</strong>と把握するにとどめておきましょう。</p>
<aside class="warning"><p>指示１：次のように関数を定義して、App.jsのApp関数の上に記述しましょう。</p>
</aside>
<pre><code language="language-js" class="language-js">const checkIn = () =&gt; {
  var pass = prompt(&#34;パスワードを入力して下さい:&#34;,&#34;&#34;);
  if (pass != null) window.location.href = &#34;https://yu-sei-m.github.io/&#34; + pass;
}
</code></pre>
<aside class="warning"><p>指示２：次のようにaタグの中にonClickプロパティに関数を記述しましょう。</p>
</aside>
<pre><code language="language-js" class="language-js">&lt;a
  className=&#34;App-link&#34;
  onClick={()=&gt;checkIn()}
&gt;
  はじめて学ぶReact
&lt;/a&gt;
</code></pre>
<p>以下のように「はじめて学ぶReact」をクリックすると入力画面が表示されると簡易ログイン機能の完成です！</p>
<p class="image-container"><img src="img/1e7ab877a3ca2733.png"></p>
<p>試しに「react-hands-on」と入力してみてください！</p>
<p>今回のハンズオン資料が表示されましたか？いいですね！もう少しで完成です！次に進みましょう。</p>


      </google-codelab-step>
    
      <google-codelab-step label="まとめ" duration="6">
        <aside class="special"><p>説明：Reactアプリ開発においてなぜコンポーネントを作成することが大切なのか理解し、今後はコンポーネントを活用できるようになりましょう。</p>
</aside>
<p><code>完成後のApp.js</code></p>
<pre><code language="language-js" class="language-js">import &#39;./App.css&#39;;
import Link from &#39;./components/link.js&#39;

const checkIn = () =&gt; {
  var pass = prompt(&#34;パスワードを入力して下さい:&#34;,&#34;&#34;);
  if (pass != null) window.location.href = &#34;https://yu-sei-m.github.io/&#34; + pass;
}

const App = () =&gt; {
  const logo = &#39;/images/logo.png&#39;;
  return (
    &lt;div className=&#34;App&#34;&gt;
      &lt;header className=&#34;App-header&#34;&gt;
        &lt;img src={logo} className=&#34;App-logo&#34; alt=&#34;logo&#34; /&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;p&gt;
          &lt;b&gt;フィットネス・エンジニアの勉強会&lt;/b&gt;
        &lt;/p&gt;
        &lt;Link text=&#34;はじめて学ぶReact&#34; onClick={()=&gt;checkIn()}/&gt;
      &lt;/header&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
<aside class="warning"><p>指示１：ローカルサーバーを起動（npm start）したコマンドラインと別のコマンドラインを開き、次のコマンドをコマンドラインで実行してコンポーネントディレクトリとリンクコンポーネントファイルを作成しましょう。</p>
</aside>
<p><code>Mac/Win共通（ソースディレクトリ内部にコンポーネント格納用ディレクトリ作成）</code></p>
<pre>cd src
</pre>
<pre>mkdir components
</pre>
<pre>cd components
</pre>
<p><code>Macのみ（リンクコンポーネントのファイル作成）</code></p>
<pre>touch link.js
</pre>
<p><code>Winのみ（リンクコンポーネントのファイル作成）</code></p>
<pre>copy nul link.js
</pre>
<aside class="warning"><p>指示２：VSCodeでlink.jsを開いて次のようにリンクコンポーネントを作成しましょう。</p>
</aside>
<p><code>link.js</code></p>
<pre><code language="language-js" class="language-js">const Link = (props) =&gt; &lt;a
  className=&#34;App-link&#34;
  onClick={props.onClick}
&gt;
  {props.text}
&lt;/a&gt;

export default Link;
</code></pre>
<p>link.jsはこれでOKです。</p>
<aside class="warning"><p>指示３：VSCodeでsrcディレクトリ配下のApp.jsを開いて次のようにimportを記述し、タグを記述しましょう。</p>
</aside>
<p><code>App.js</code></p>
<pre><code language="language-js" class="language-js">// ２行目に追記
import Link from &#39;./components/link.js&#39;

// 元のaタグ全体を以下に置換
&lt;Link text=&#34;はじめて学ぶReact&#34; onClick={()=&gt;checkIn()}/&gt;
</code></pre>
<p>完成後の見た目は変わりませんが、きちんと同じように挙動することが確認できたでしょうか？これがいわゆる<strong>コンポーネント化で</strong>、作成から読み込みまでできたことになります。ここまでできたら、次に進んでネット上に公開しましょう！</p>


      </google-codelab-step>
    
      <google-codelab-step label="補足" duration="5">
        <aside class="special"><p>説明：Reactアプリを公開するときのオーソドックスな方法を学びます。</p>
</aside>
<aside class="warning"><p>指示１：次のビルドコマンドを実行しましょう。</p>
</aside>
<pre>npm run-script build
</pre>
<p><strong>このbuildコマンドを実行するとbuildディレクトリが作成されます。</strong></p>
<p>buildディレクトリとは、本番環境で公開するために書き出されたウェブアプリ（ウェブサイト）のディレクトリのことです。</p>
<aside class="warning"><p>指示２：事前準備で作成したNelifyのアカウントを開いて、次のようにbuildディレクトリドラッグ&amp;ドロップをしましょう。</p>
</aside>
<p class="image-container"><img src="img/48b70cd348e830a4.gif"></p>
<h2 is-upgraded>完成おめでとうございます！</h2>
<aside class="warning"><p>指示３：デプロイが完了したらNetlifyの画面に緑色のリンクが表示されているはずなので、それをクリックして開きましょう。以下の画像の緑のリンクに相当する部分をクリックすればオーケーです。</p>
</aside>
<p class="image-container"><img src="img/9ea29c7bc4a58261.png"></p>
<p>作成したサイトが表示されましたね！お疲れ様でした！</p>
<p>早く終わった人は課題にも挑戦してみましょう！</p>
<p><strong>Doneを押してからChallengeをクリックして「react-challenge」と入力すると課題に取り組むことができます。</strong></p>
<p>以下のボタンをクリックしても開けます。</p>
<p><a href="https://yu-sei-m.github.io/react-challenge/#0" target="_blank"><paper-button class="colored" raised>課題に取り組む</paper-button></a></p>
<p>　◆　◇　◆　◇　◆　◇　◆　◇　◆　◇　◆　◇　◆　◇　◆　◇　◆　◇</p>
<h3 is-upgraded>完成できなかった人のための共有</h3>
<p><a href="https://yu-sei-m.github.io/react-practice-20201107.zip" target="_blank"><paper-button class="colored" raised>本日作成したアプリディレクトリのzip</paper-button></a></p>
<p>ダウンロードして展開した後に以下のコマンドを実行してください。</p>
<p><code>ライブラリのインストール</code></p>
<pre>npm install
</pre>
<p><code>ローカルサーバーの起動</code></p>
<pre>npm start
</pre>
<p><code>作成したアプリのビルド</code></p>
<pre>npm run-script build
</pre>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
